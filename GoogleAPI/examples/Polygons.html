<!DOCTYPE html>
<html>
<head>
    <title>Drawing tools</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            height: 100%;
        }
    </style>
</head>
<body>
<div id="array">a</div>
<div id="array2" onclick="">b</div>

<div id="map" style="max-width:700px;max-height:400px;"></div>

<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDLny4Q7L4wBTjw4FQcygnpnM7-1TLbYyM&libraries=drawing"></script>-->
<script>

    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 24.886, lng: -70.269},
            zoom: 5
        });
        var sColor = '#6080a0';
        var fColor = '#6080a0';
        var fOpacity = 0.4;
        var sWeight = 2;
        var drawingManager = new google.maps.drawing.DrawingManager({
                    drawingMode: google.maps.drawing.OverlayType.FALSE,
                    drawingControl: true,
                    drawingControlOptions: {
                        position: google.maps.ControlPosition.TOP_CENTER,
                        drawingModes: ['circle', 'polygon'] //, 'rectangle']
                    },
                    markerOptions: {icon: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'},
                    circleOptions: {
                        fillColor: fColor,
                        fillOpacity: fOpacity,
                        strokeWeight: sWeight,
                        strokeColor: sColor,
                        clickable: false,
                        editable: false,
                        zIndex: 1
                    },
                    polygonOptions: {
                        strokeColor: sColor,
                        fillColor: fColor,
                        fillOpacity: fOpacity,
                        strokeWeight: sWeight,
                        clickable: false,
                        editable: false,
                        zIndex:0,
                    },
                    rectangleOptions: {
                        strokeColor: sColor,
                        fillColor: fColor,
                        fillOpacity: fOpacity,
                        strokeWeight: sWeight,
                        clickable: true,
                        editable: true,
                    }
                })
                ;

        drawingManager.setMap(map);



        var markers = [];
        var shapes = [];



        var triangleCoords = [
            {lat: 25.774, lng: -80.190},
            {lat: 18.466, lng: -66.118},
            {lat: 32.321, lng: -64.757},
            {lat: 32.321, lng: -80.757},
        ];
        var bermudaTriangle = new google.maps.Polygon({
            paths: triangleCoords,
            strokeColor: '#FF0000',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#000000',
            fillOpacity: 0.1,
            clickable: false,
            editable: true,
        });
        bermudaTriangle.setMap(map);
        shapes.push(bermudaTriangle);

        google.maps.event.addListener(drawingManager, 'overlaycomplete', function (event) {
            if (event.type == 'circle') {
                var radius = event.overlay.getRadius();
                console.log(radius);
            } else if (event.type == 'polygon') {
//              remove all the previous markers
                remove();
                var vertices = event.overlay.getPath();
                var personalVertices = [];
                for (var i = 0; i < vertices.getLength(); i++) {
                    var xy = vertices.getAt(i);

//                    console.log(xy.lat() + ' , ' + xy.lng());
                    personalVertices[i] = {'lat': xy.lat(), 'lng': xy.lng()};
//                    personalVertices.lat = xy.lat();
//                    personalVertices.lng = xy.lng();
                }
//                CALL THE FUNCTION TO CREATE VERTICES
                dots(personalVertices);
//            } else if (event.type == 'rectangle') {
//                vertices = event.overlay.getPath();
//                for (var i = 0; i < vertices.getLength(); i++) {
//                    var xy = vertices.getAt(i);
//                    console.log(xy.lat() + ' , ' + xy.lng());
//                }
//                console.log('coordinates: ');
//                console.log(personalVertices);
//                console.log('fine coordinates ');

            }
        });

        function dots(personalVertices) {
            google.maps.event.addListener(map, 'click', function (e) {
                var personalShape = new google.maps.Polygon({paths: personalVertices});
                shapes.push(personalShape);

                var resultColor =
                        google.maps.geometry.poly.containsLocation(e.latLng, personalShape) ?
                                'red' :
                                'green';

                var marker = new google.maps.Marker({
                    position: e.latLng,
                    map: map,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        fillColor: resultColor,
                        fillOpacity: .5,
                        strokeColor: 'white',
                        strokeWeight: .5,
                        scale: 10,
                        zIndex:1,
                    }
                });
                markers.push(marker);

            });
        }


        var vertices = bermudaTriangle.getPath();
        for (var i = 0; i < vertices.getLength(); i++) {
            var xy = vertices.getAt(i);
        }

        google.maps.event.addListener(map, 'click', function (e) {

            var resultColor =
                    google.maps.geometry.poly.containsLocation(e.latLng, bermudaTriangle) ?
                            'red' :
                            'green';


            var marker = new google.maps.Marker({
                position: e.latLng,
                map: map,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: resultColor,
                    fillOpacity: 1,
                    strokeColor: 'white',
                    strokeWeight: 0.2,
                    scale: 10,
                    zIndex: 1,
                }
            });
            markers.push(marker);

        });


    var remove = function(){
        console.log(markers);
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
//            console.log(markers[i]);
        }
        markers = [];
        console.log(markers);
//        bermudaTriangle.setMap(null);
        for (var i = 0; i < shapes.length; i++) {
            shapes[i].setMap(null);
        }

    }

    }

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDeigJ0MtRTk-X-plGt4BDf_1QiSCMh91Q&libraries=drawing&callback=initMap"
        async defer></script>
</body>
</html>